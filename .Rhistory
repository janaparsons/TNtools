devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::load_all()
devtools::load_all
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
?%>%
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::document()
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::document()
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
?rename
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
?rownames_to_column
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
View(test)
state <- 1
dplyr::if_else(is.character(state) & length(state)==2, state,
dplyr::if_else(is.character(state) & length(state)==1, paste0("0", state),
dplyr::if_else(is.numeric(state) & floor(log10(x)) + 1==1, paste0("0", state), state)))
dplyr::if_else(is.character(state) & length(state)==2, state,
dplyr::if_else(is.character(state) & length(state)==1, paste0("0", state),
dplyr::if_else(is.numeric(state) & floor(log10(state)) + 1==1, paste0("0", state), state)))
`rlang::last_error()`
rlang::last_error()
state <- if (is.character(state) & length(state)==2){
state
} else {
if (is.character(state) & length(state)==1) {
paste0("0", state)
} else {
if (is.numeric(state) & floor(log10(state)) + 1==1) {
paste0("0", state)
} else {
state
}
}
}
state <- 1
if (is.character(state) & length(state)==2){
state
} else {
if (is.character(state) & length(state)==1) {
paste0("0", state)
} else {
if (is.numeric(state) & floor(log10(state)) + 1==1) {
paste0("0", state)
} else {
state
}
}
}
state <- 01
if (is.character(state) & length(state)==2){
state
} else {
if (is.character(state) & length(state)==1) {
paste0("0", state)
} else {
if (is.numeric(state) & floor(log10(state)) + 1==1) {
paste0("0", state)
} else {
state
}
}
}
state <- '1'
if (is.character(state) & length(state)==2){
state
} else {
if (is.character(state) & length(state)==1) {
paste0("0", state)
} else {
if (is.numeric(state) & floor(log10(state)) + 1==1) {
paste0("0", state)
} else {
state
}
}
}
state <- '1'
if (is.character(state) & length(state)==2){
state
} else {
if (is.character(state) & length(state)==1) {
paste0("0", state)
} else {
if (is.numeric(state) & floor(log10(state)) + 1==1) {
paste0("0", state)
} else {
state
}
}
}
?select
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
View(test)
scales::label_percent()test
scales::label_percent() test
scales::label_percent() (test)
View(test)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
View(test)
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
View(test)
?scales
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
test <- censusapi::getCensus(name = "acs/acs5", vintage = 2019, key =  "7e25a5365676472f0dd97248a68e5288a0e65338", region=paste0("metropolitan statistical area/micropolitan statistical area:", 32820), vars = vars <- c('B19013_001E', #median HH income, total
'B25064_001E', #median gross rent
'B25071_001E', #median gross rent as % of income
'B25033_001E', #total pop in occupied units
'B25033_002E', #total pop in owner-occupied
'B25033_008E', #total pop in renter-occupied units
'B25002_001E', 'B25002_002E', 'B25002_003E', #total units, total occupied, total vacant
'B02001_001E', #race pop denom
'B02001_002E', 'B02001_003E', #white (alone), black (alone),
'B03001_001E', 'B03001_002E', 'B03001_003E', #hispanic denominator, not hisp, hisp
'B05002_001E', 'B05002_009E', #native denom, born outside US
'B25018_001E' #median number of rooms
)) %>%
clean_acs() %>%
dplyr::select( !vars <- c('B19013_001E', #median HH income, total
'B25064_001E', #median gross rent
'B25071_001E', #median gross rent as % of income
'B25033_001E', #total pop in occupied units
'B25033_002E', #total pop in owner-occupied
'B25033_008E', #total pop in renter-occupied units
'B25002_001E', 'B25002_002E', 'B25002_003E', #total units, total occupied, total vacant
'B02001_001E', #race pop denom
'B02001_002E', 'B02001_003E', #white (alone), black (alone),
'B03001_001E', 'B03001_002E', 'B03001_003E', #hispanic denominator, not hisp, hisp
'B05002_001E', 'B05002_009E', #native denom, born outside US
'B25018_001E' #median number of rooms
))
test <- censusapi::getCensus(name = "acs/acs5", vintage = 2019, key =  "7e25a5365676472f0dd97248a68e5288a0e65338", region=paste0("metropolitan statistical area/micropolitan statistical area:", 32820), vars = c('B19013_001E', #median HH income, total
'B25064_001E', #median gross rent
'B25071_001E', #median gross rent as % of income
'B25033_001E', #total pop in occupied units
'B25033_002E', #total pop in owner-occupied
'B25033_008E', #total pop in renter-occupied units
'B25002_001E', 'B25002_002E', 'B25002_003E', #total units, total occupied, total vacant
'B02001_001E', #race pop denom
'B02001_002E', 'B02001_003E', #white (alone), black (alone),
'B03001_001E', 'B03001_002E', 'B03001_003E', #hispanic denominator, not hisp, hisp
'B05002_001E', 'B05002_009E', #native denom, born outside US
'B25018_001E' #median number of rooms
)) %>%
clean_acs() %>%
dplyr::select( !c('B19013_001E', #median HH income, total
'B25064_001E', #median gross rent
'B25071_001E', #median gross rent as % of income
'B25033_001E', #total pop in occupied units
'B25033_002E', #total pop in owner-occupied
'B25033_008E', #total pop in renter-occupied units
'B25002_001E', 'B25002_002E', 'B25002_003E', #total units, total occupied, total vacant
'B02001_001E', #race pop denom
'B02001_002E', 'B02001_003E', #white (alone), black (alone),
'B03001_001E', 'B03001_002E', 'B03001_003E', #hispanic denominator, not hisp, hisp
'B05002_001E', 'B05002_009E', #native denom, born outside US
'B25018_001E' #median number of rooms
))
View(test)
test1 <- test %>% mutate(pop = scales::label_comma(accuracy = 1)(pop))
test1 <- test %>% dplyr::mutate(pop = scales::label_comma(accuracy = 1)(pop))
View(test1)
test_intermediate <- test
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
View(test)
devtools::load_all()
test <- TN_tracts(47, 157, 32820, c('011500', '011600', '004600', '005900'  ),c('004200', '011400' ), c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
)
View(test)
cd
wd()
getwd()
?TNtract
TN_tracts
?TN_tracts
TN_tracts(48, 453, 12420, '002202')
col_park <- TN_tracts(48, 453, 12420, '002202')
View(col_park)
pitt <- TN_tracts(13, 121, 12060, c('006300', '005700'))
View(pitt)
#sample code for using TNtools to pull data on a neighborhood
install_github("janaparsons/TNtools")
library(TNtools)
###First, set up googlesheets access with your google account
install.packages('googlesheets4', 'httpuv')
#sample code for using TNtools to pull data on a neighborhood
pkgs <- c('devtools', 'googlesheets4', 'httpuv')
check <- sapply(pkgs,require,warn.conflicts = TRUE,character.only = TRUE)
if(any(!check)){
pkgs.missing <- pkgs[!check]
install.packages(pkgs.missing)
check <- sapply(pkgs.missing,require,warn.conflicts = TRUE,character.only = TRUE)
}
install_github("janaparsons/TNtools")
library(TNtools)
###First, set up googlesheets access with your google account
gs_auth(new_user = TRUE)
x <- sheet_write(totalcensus::dict_cbsa[,1:2])
install.packages('devtools')
library(devtools)
install_github("janaparsons/TNtools")
install.packages('devtools')
library(devtools)
install_github("janaparsons/TNtools")
?TNtools
?TN_tracts
library(TNtools)
?TN_tracts
?TNtools
memphis <- TN_tracts(state=47, county = 157, msa = 32820, neighborhood1 = sv_tracts,
neighborhood2 = frayser_tracts, neighborhood3 = downtown_tracts,
census_key = census_key)
#add your census key (you can continue to use mine as long as you're not doing thousands of calls a day)
census_key <- '7e25a5365676472f0dd97248a68e5288a0e65338'
##Collect relevant information
#Neighborhood/tract overlay: https://statisticalatlas.com/United-States/Overview
#state and county fips: https://www.nrcs.usda.gov/wps/portal/nrcs/detail/national/home/?cid=nrcs143_013697
#CBSA lookup https://public.opendatasoft.com/explore/dataset/core-based-statistical-areas-cbsas-and-combined-statistical-areas-csas/table/
# fips codes: state = 47, county = 157; CBSA = 32820
sv_tracts <- c('011500', '011600', '004600', '005900'  )
frayser_tracts <- c('009901', '009902', '010000', '010210' , '010220', '010120', '010110', '010300')
downtown_tracts <- c('004200', '011400' )
memphis <- TN_tracts(state=47, county = 157, msa = 32820, neighborhood1 = sv_tracts,
neighborhood2 = frayser_tracts, neighborhood3 = downtown_tracts,
census_key = census_key)
View(memphis)
